<script>

function toggleCheckbox(id) {

	$.ajax({
      type: "POST",
      url: "/users/tasks/" +id + "/toggleComplete.json",
      success: function(response) {
      	
      	console.log(response.completed_date);
      	console.log(response.due_date);
      	
      	
	    var taskElement = document.getElementById('task_'+id);
	    var taskDateElement = document.getElementById('item_datetime_'+id)
 	    if(taskElement.getAttribute('class') == "completed") {
    	  taskElement.setAttribute('class', 'incomplete');
	      taskDateElement.text = response.due_date;
		  document.getElementById(id).src = "<%= image_path("uncheck.png") %>";
		  
	    } else {
	      taskElement.setAttribute('class', 'completed');
	      taskDateElement.text = response.completed_date;
		  document.getElementById(id).src = "<%= image_path("check.png") %>";

	    }
    
        setInterval("location.reload()", 5000);

      }
    });

}

</script>

<div id="demo"></div>

<%= render 'simple_add', :style => "display:inline" %>

<div id="list_tables">
<% if !@overdue_tasks.empty? %>
<%= render partial: 'overdue_task_table', locals: { task_header: "Overdue", task_table: @overdue_tasks } %>
<% end %>

<% if !@today_tasks.empty? %>
<%= render partial: 'incomplete_task_table', locals: { task_header: "Today", task_table: @today_tasks } %>
<% end %>

<% if !@tomorrow_tasks.empty? %>
<%= render partial: 'incomplete_task_table', locals: { task_header: "Tomorrow", task_table: @tomorrow_tasks } %>
<% end %>

<% if !@this_week_tasks.empty? %>
<%= render partial: 'incomplete_task_table', locals: { task_header: "This Week", task_table: @this_week_tasks } %>
<% end %>

<% if !@future_tasks.empty? %>
<%= render partial: 'incomplete_task_table', locals: { task_header: "Future", task_table: @future_tasks } %>
<% end %>

<% if !@no_duedate_tasks.empty? %>
<%= render partial: 'incomplete_task_table', locals: { task_header: "No DueDate", task_table: @no_duedate_tasks } %>
<% end %>

<% if !@completed_tasks.empty? %>
<%= render partial: 'completed_task_table', locals: { task_header: "Completed", task_table: @completed_tasks } %>
<% end %>
</div>
