<script>
$(document).ready(function(){

  if($.cookie('show_details') == "true") {
    show_details();
  } else {
    hide_details();
  }

  $("#add_details_button").click(function(){
  	if($("#add_details_button").text() == "Show Details") {
      show_details();
  	} else {
  	  hide_details();
  	}
  });
});

function show_details() {
  $("#add_details_block").show();
  $("#add_details_button").text("Hide Details");

  $.cookie('show_details', "true");
  grab_cookies_details();
}

function hide_details() {
  $("#add_details_block").hide();
  $("#add_details_button").text("Show Details");
  
  $.cookie('show_details', "false");
  set_default_details();
  grab_cookies_details();
}

function set_default_details() {
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth()+1; //January is 0!

  var yyyy = today.getFullYear();
  if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} today = yyyy+'-'+mm+'-'+dd;

  $.cookie('note', "");
  $.cookie('due_date', today);
  $.cookie('due_time', "");
}

function grab_cookies_details() {
  $("#task_note").val($.cookie("note"));
  $("#task_due_date").val($.cookie("due_date"));
  $("#task_due_time").val($.cookie("due_time"));
}
</script>


<div class="row center">
  <div class="quick_task_container">
  <%= form_for @new_task do |f| %>
    <div class="field left">
      <%= f.label :name, value: "Task" %>
      <%= f.text_field :name, :autofocus => true %>
      <div class="form_button">
        <%= f.submit 'Quick Add', class: 'btn btn-default' %>
        <button id="add_details_button" class="btn btn-default" name="new_task" type="button" value="Add Details">Show Details</button>
      </div>
    </div>

	<div id="add_details_block" class="center">
      <div class="field left">
        <%= f.label :note %>
        <%= f.text_area :note, value: cookies[:note] %><br />
      </div>
      <div class="field left">
        <%= f.label :due_date %>
        <%= f.date_field :due_date, value: cookies[:due_date] %><br />
      </div>
      <div class="field left">
        <%= f.label :due_time %>
        <%= f.time_field :due_time, value: cookies[:due_time] %><br />
      </div>
	</div>

  <% end %>
  </div>
</div>
<br />

